// Generated by CoffeeScript 2.5.1
var SEPARATOR, TextDisplay, twSEP;

SEPARATOR = ' â€¢ ';

twSEP = 0;

TextDisplay = class TextDisplay {
  constructor(dx, dy, dw1, dh, ts, text1) {
    var widths;
    this.dx = dx;
    this.dy = dy;
    this.dw = dw1;
    this.dh = dh;
    this.ts = ts;
    this.text = text1;
    this.names = this.text.split(', ');
    this.dy += this.dh / 2;
    textSize(this.ts);
    twSEP = textWidth(SEPARATOR);
    widths = this.names.map(function(name, index) {
      return [Math.round(textWidth(name)), index];
    });
    widths.sort();
    widths.reverse();
    this.groups = this.gruppera(widths, this.dw);
  }

  draw() {
    var date, group, i, index, k, len, name, ref, results, w;
    textAlign(LEFT, CENTER);
    textSize(this.ts);
    date = new Date();
    group = this.groups[date.getSeconds() % this.groups.length];
    w = 0;
    ref = range(group.length);
    results = [];
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      index = group[i];
      name = this.names[index];
      if (i < group.length - 1) {
        name += SEPARATOR;
      }
      if (index === 0) {
        fill('white');
      } else {
        fill('gray');
      }
      text(name, w, this.dy);
      results.push(w += textWidth(name));
    }
    return results;
  }

  gruppera(widths, dw) {
    var cw, groups, i, index, indexj, j, k, l, len, len1, ref, ref1, temp, w, wj;
    groups = [];
    ref = range(widths.length);
    for (k = 0, len = ref.length; k < len; k++) {
      i = ref[k];
      [w, index] = widths[i];
      if (w === 999999) {
        continue;
      }
      cw = w;
      temp = [index];
      ref1 = range(i + 1, widths.length);
      for (l = 0, len1 = ref1.length; l < len1; l++) {
        j = ref1[l];
        [wj, indexj] = widths[j];
        if (wj === 999999) {
          continue;
        }
        if (cw + wj + temp.length * twSEP <= dw) {
          cw += wj;
          temp.push(indexj);
          widths[j] = [999999, indexj];
        }
      }
      if (temp.length > 0) {
        groups.push(temp);
      }
    }
    return groups;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dEVhc2VyLmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXFRleHRFYXNlci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsU0FBQSxFQUFBLFdBQUEsRUFBQTs7QUFBQSxTQUFBLEdBQVk7O0FBQ1osS0FBQSxHQUFROztBQUVGLGNBQU4sTUFBQSxZQUFBO0VBQ0MsV0FBYyxHQUFBLElBQUEsS0FBQSxJQUFBLElBQUEsT0FBQSxDQUFBO0FBQ2YsUUFBQTtJQURnQixJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFBRyxJQUFDLENBQUE7SUFDbkMsSUFBQyxDQUFBLEtBQUQsR0FBUyxJQUFDLENBQUEsSUFBSSxDQUFDLEtBQU4sQ0FBWSxJQUFaO0lBQ1QsSUFBQyxDQUFBLEVBQUQsSUFBTyxJQUFDLENBQUEsRUFBRCxHQUFJO0lBQ1gsUUFBQSxDQUFTLElBQUMsQ0FBQSxFQUFWO0lBQ0EsS0FBQSxHQUFRLFNBQUEsQ0FBVSxTQUFWO0lBQ1IsTUFBQSxHQUFTLElBQUMsQ0FBQSxLQUFLLENBQUMsR0FBUCxDQUFXLFFBQUEsQ0FBQyxJQUFELEVBQU0sS0FBTixDQUFBO2FBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUwsQ0FBVyxTQUFBLENBQVUsSUFBVixDQUFYLENBQUQsRUFBNkIsS0FBN0I7SUFBaEIsQ0FBWDtJQUNULE1BQU0sQ0FBQyxJQUFQLENBQUE7SUFDQSxNQUFNLENBQUMsT0FBUCxDQUFBO0lBQ0EsSUFBQyxDQUFBLE1BQUQsR0FBVSxJQUFDLENBQUEsUUFBRCxDQUFVLE1BQVYsRUFBaUIsSUFBQyxDQUFBLEVBQWxCO0VBUkc7O0VBVWQsSUFBTyxDQUFBLENBQUE7QUFDUixRQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEtBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBO0lBQUUsU0FBQSxDQUFVLElBQVYsRUFBZSxNQUFmO0lBQ0EsUUFBQSxDQUFTLElBQUMsQ0FBQSxFQUFWO0lBQ0EsSUFBQSxHQUFPLElBQUksSUFBSixDQUFBO0lBQ1AsS0FBQSxHQUFRLElBQUMsQ0FBQSxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQUwsQ0FBQSxDQUFBLEdBQW9CLElBQUMsQ0FBQSxNQUFNLENBQUMsTUFBN0I7SUFDZixDQUFBLEdBQUk7QUFDSjtBQUFBO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxLQUFBLEdBQVEsS0FBSyxDQUFDLENBQUQ7TUFDYixJQUFBLEdBQU8sSUFBQyxDQUFBLEtBQUssQ0FBQyxLQUFEO01BQ2IsSUFBRyxDQUFBLEdBQUUsS0FBSyxDQUFDLE1BQU4sR0FBYSxDQUFsQjtRQUF5QixJQUFBLElBQVEsVUFBakM7O01BQ0EsSUFBRyxLQUFBLEtBQU8sQ0FBVjtRQUFpQixJQUFBLENBQUssT0FBTCxFQUFqQjtPQUFBLE1BQUE7UUFBbUMsSUFBQSxDQUFLLE1BQUwsRUFBbkM7O01BQ0EsSUFBQSxDQUFLLElBQUwsRUFBVyxDQUFYLEVBQWEsSUFBQyxDQUFBLEVBQWQ7bUJBQ0EsQ0FBQSxJQUFLLFNBQUEsQ0FBVSxJQUFWO0lBTk4sQ0FBQTs7RUFOTTs7RUFjUCxRQUFXLENBQUMsTUFBRCxFQUFRLEVBQVIsQ0FBQTtBQUNaLFFBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLENBQUEsRUFBQTtJQUFFLE1BQUEsR0FBUztBQUNUO0lBQUEsS0FBQSxxQ0FBQTs7TUFDQyxDQUFDLENBQUQsRUFBRyxLQUFILENBQUEsR0FBWSxNQUFNLENBQUMsQ0FBRDtNQUNsQixJQUFHLENBQUEsS0FBSyxNQUFSO0FBQW9CLGlCQUFwQjs7TUFDQSxFQUFBLEdBQUs7TUFDTCxJQUFBLEdBQU8sQ0FBQyxLQUFEO0FBQ1A7TUFBQSxLQUFBLHdDQUFBOztRQUNDLENBQUMsRUFBRCxFQUFJLE1BQUosQ0FBQSxHQUFjLE1BQU0sQ0FBQyxDQUFEO1FBQ3BCLElBQUcsRUFBQSxLQUFNLE1BQVQ7QUFBcUIsbUJBQXJCOztRQUNBLElBQUcsRUFBQSxHQUFLLEVBQUwsR0FBVSxJQUFJLENBQUMsTUFBTCxHQUFjLEtBQXhCLElBQWlDLEVBQXBDO1VBQ0MsRUFBQSxJQUFNO1VBQ04sSUFBSSxDQUFDLElBQUwsQ0FBVSxNQUFWO1VBQ0EsTUFBTSxDQUFDLENBQUQsQ0FBTixHQUFZLENBQUMsTUFBRCxFQUFRLE1BQVIsRUFIYjs7TUFIRDtNQU9BLElBQUcsSUFBSSxDQUFDLE1BQUwsR0FBYyxDQUFqQjtRQUF3QixNQUFNLENBQUMsSUFBUCxDQUFZLElBQVosRUFBeEI7O0lBWkQ7V0FhQTtFQWZVOztBQXpCWiIsInNvdXJjZXNDb250ZW50IjpbIlNFUEFSQVRPUiA9ICcg4oCiICdcclxudHdTRVAgPSAwXHJcblxyXG5jbGFzcyBUZXh0RGlzcGxheVxyXG5cdGNvbnN0cnVjdG9yIDogKEBkeCxAZHksQGR3LEBkaCxAdHMsQHRleHQpIC0+XHJcblx0XHRAbmFtZXMgPSBAdGV4dC5zcGxpdCAnLCAnXHJcblx0XHRAZHkgKz0gQGRoLzJcclxuXHRcdHRleHRTaXplIEB0c1xyXG5cdFx0dHdTRVAgPSB0ZXh0V2lkdGggU0VQQVJBVE9SXHJcblx0XHR3aWR0aHMgPSBAbmFtZXMubWFwIChuYW1lLGluZGV4KSAtPiBbTWF0aC5yb3VuZCh0ZXh0V2lkdGgobmFtZSkpLGluZGV4XVxyXG5cdFx0d2lkdGhzLnNvcnQoKVxyXG5cdFx0d2lkdGhzLnJldmVyc2UoKVxyXG5cdFx0QGdyb3VwcyA9IEBncnVwcGVyYSB3aWR0aHMsQGR3XHJcblxyXG5cdGRyYXcgOiAoKSAtPlxyXG5cdFx0dGV4dEFsaWduIExFRlQsQ0VOVEVSXHJcblx0XHR0ZXh0U2l6ZSBAdHNcclxuXHRcdGRhdGUgPSBuZXcgRGF0ZSgpXHJcblx0XHRncm91cCA9IEBncm91cHNbZGF0ZS5nZXRTZWNvbmRzKCkgJSBAZ3JvdXBzLmxlbmd0aF1cclxuXHRcdHcgPSAwXHJcblx0XHRmb3IgaSBpbiByYW5nZSBncm91cC5sZW5ndGggXHJcblx0XHRcdGluZGV4ID0gZ3JvdXBbaV1cclxuXHRcdFx0bmFtZSA9IEBuYW1lc1tpbmRleF1cclxuXHRcdFx0aWYgaTxncm91cC5sZW5ndGgtMSB0aGVuIG5hbWUgKz0gU0VQQVJBVE9SXHJcblx0XHRcdGlmIGluZGV4PT0wIHRoZW4gZmlsbCAnd2hpdGUnIGVsc2UgZmlsbCAnZ3JheSdcclxuXHRcdFx0dGV4dCBuYW1lLCB3LEBkeVxyXG5cdFx0XHR3ICs9IHRleHRXaWR0aCBuYW1lIFxyXG5cclxuXHRncnVwcGVyYSA6ICh3aWR0aHMsZHcpIC0+XHJcblx0XHRncm91cHMgPSBbXVxyXG5cdFx0Zm9yIGkgaW4gcmFuZ2Ugd2lkdGhzLmxlbmd0aFxyXG5cdFx0XHRbdyxpbmRleF0gPSB3aWR0aHNbaV1cclxuXHRcdFx0aWYgdyA9PSA5OTk5OTkgdGhlbiBjb250aW51ZVxyXG5cdFx0XHRjdyA9IHdcclxuXHRcdFx0dGVtcCA9IFtpbmRleF1cclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgaSsxLHdpZHRocy5sZW5ndGhcclxuXHRcdFx0XHRbd2osaW5kZXhqXSA9IHdpZHRoc1tqXVxyXG5cdFx0XHRcdGlmIHdqID09IDk5OTk5OSB0aGVuIGNvbnRpbnVlXHJcblx0XHRcdFx0aWYgY3cgKyB3aiArIHRlbXAubGVuZ3RoICogdHdTRVAgPD0gZHcgXHJcblx0XHRcdFx0XHRjdyArPSB3alxyXG5cdFx0XHRcdFx0dGVtcC5wdXNoIGluZGV4alxyXG5cdFx0XHRcdFx0d2lkdGhzW2pdID0gWzk5OTk5OSxpbmRleGpdXHJcblx0XHRcdGlmIHRlbXAubGVuZ3RoID4gMCB0aGVuIGdyb3Vwcy5wdXNoIHRlbXBcclxuXHRcdGdyb3VwcyJdfQ==
//# sourceURL=c:\github\2022-004-P5Bug\coffee\TextEaser.coffee